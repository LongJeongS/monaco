!function(a,b){"use strict";var c=a.Monaco=a.Monaco||{};c.utils=c.utils||{},c.utils.setCookie=function(a,c,d,e){d=d&&b.isNumber(d)?d:365;var f=new Date;f.setTime(f.getTime()+1e3*60*60*24*d);var g="; expires="+f.toGMTString();c=escape(c);var h=a+"="+c+g+"; path=/;";if(e){var i=document.domain.split(".");i="."+i[i.length-2]+"."+i[i.length-1],h+=" domain="+i+";"}document.cookie=h},c.utils.getCookie=function(a){var b=null;return(b=new RegExp("(?:^|; )"+encodeURIComponent(a)+"=([^;]*)").exec(document.cookie))?b[1]:null}}(window,window._),function(a,b){"use strict";var c=a.Monaco=a.Monaco||{},d=c.utils=c.utils||{},e=function(a,c){var d,e=this;d=a&&b.has(a,"constructor")?a.constructor:function(){return e.apply(this,arguments)},b.extend(d,e,c);var f=function(){this.constructor=d};return f.prototype=e.prototype,d.prototype=new f,a&&b.extend(d.prototype,a),d.__super__=e.prototype,d};d.extend=e}(window,window._),function(){"use strict";var a=JSON.parse;JSON.parse=function(b){return b?a(b):null}}(window,window._),function(a,b,c){"use strict";var d=a.Monaco=a.Monaco||{},e=d.Application=function(a,c){if(!a)throw new Error("required application parameter: appName");c=c||{},this.name=a,this.options=c,this.cid=b.uniqueId("app"),this._settings={},this.models={},this.collections={},this.views={};var e=c.RouterClass||d.Router;this.router=new e({routes:c.routes}),d.trigger("app:built",this,c)};b.extend(e.prototype,c.Events,{start:function(a){if(a=a||{},a.pushState=a.pushState||!1,!b.has(this,"router"))throw new Error("missing router instance");this.router._addRoutes(),c.history.start({pushState:a.pushState}),this.trigger("started",this)},add:function(a,b){if(!b.prototype||!b.prototype.namespace)throw new Error("missing required object property 'namespace'");if(this[b.prototype.namespace][a])throw new Error(a+" have already been defined in "+this.name+"."+b.prototype.namespace);b.prototype._app=this,this[b.prototype.namespace][a]=b},get:function(c){if(b.has(this._settings,c))return this._settings[c];var d=null;try{d=JSON.parse(a.localStorage.getItem(c))}catch(e){return void 0}return null===d?void 0:(this._settings[c]=d,d)},set:function(b,c,d){if(d=d||!1,void 0===b||void 0===c)throw new Error("set method required both key and value parameters");if(d===!0)try{a.localStorage.setItem(b,JSON.stringify(c))}catch(e){return!1}this._settings[b]=c}}),b.extend(d,c.Events);var f=function(a){a=a||{};var b=a.error,c=this._app&this._app.router?this._app.router:null;return a.error=function(a,d,e){c&&c.trigger("route:fetch.error",a,d,e),b&&b.apply(this,arguments)},a};d.Collection=c.Collection.extend({namespace:"collections",fetch:function(a){return a=f.call(this,a),c.Collection.prototype.fetch.call(this,a)}}),d.Model=c.Model.extend({namespace:"models",fetch:function(a){return a=f.call(this,a),c.Model.prototype.fetch.call(this,a)}}),d.View=c.View.extend({namespace:"views"}),d.Router=c.Router.extend({_uroutes:[],_routes:[],constructor:function(){var a=this.initialize;this.initialize=function(c){b.each(c.routes,function(a,b){this._routes.push({key:b,value:a})},this),a.apply(this,arguments)},c.Router.prototype.constructor.apply(this,arguments)},add:function(a){var c,d;if(!a||!b.isObject(a))throw new Error("invalid routes format - please check the docs");for(d=b.keys(a);null!=(c=d.pop());)this._uroutes.unshift({key:c,value:a[c]})},_addRoutes:function(){for(var a;null!=(a=this._uroutes.pop());)this._routes.push(a),this._addRoute(a.key,a.value)},_addRoute:function(a,c){if(c=c||{},""!==a&&!a)throw new Error("invalid route: "+a);var d=null;if(b.isString(c)?d=c:b.isArray(c)&&c.length>0&&(d=c[0]),!d)throw new Error("ivalid callback from route: "+a);return this.route(a,d)}}),d.History=c.History}(window,window._,window.Backbone),function(a,b,c){"use strict";var d=a.Monaco=a.Monaco||{};d.on("app:built",function(a,c){if(a.local._app=a,b.has(c,"cacheLocal")&&(a.local.autoCache=Boolean(b.result(c,"cacheLocal"))),b.has(c,"cacheExpire")){var d=b.result(c,"cacheExpire");a.local.cacheExpire=b.isNull(d)||b.isNumber(d)?d:void 0}c.prefetched&&(b.each(c.prefetched,function(a,b){this.local.set({resource:b,models:[]},a,c.prefetchedExpire)},a),delete a.options.prefetched)});var e=d.Application.prototype.add;d.Application.prototype.add=function(a,b){if("collections"===b.prototype.namespace&&(!b.prototype.resource||""===b.prototype.resource))throw new Error("required `resource` property missing from this collection definition");return e.apply(this,arguments)},d.Application.prototype.local={autoCache:!1,cacheExpire:30,get:function(a){var c=b.has(a,"models"),d=c?a:a.collection||null,e=d?b.result(d,"resource"):null;if(e){var f=this._getLocalData(e);if(f){if(f.resp=this.decompress(f.resp),c)return f.resp;if(f=b.find(f.resp,function(b){return b[a.idAttribute]===a.id}),f&&(!f._ts||!this._isExpired(f)))return delete f._ts,f}}return void 0},set:function(a,c,d){var e=b.has(a,"models"),f=e?a:a.collection||null,g=f?b.result(f,"resource"):null;if(d=void 0!==d?d:!1,g&&f){if(!e){var h=d;(h!==!1||void 0!==(h=b.result(a,"expireLocal")))&&(c=this._setExpire(c,h,!0)),c=this._addToCollectionData(a,c,f)}return c=this.compress(c),c=this._setExpire(c,d!==!1?d:b.result(f,"expireLocal")),this._storageSet(g,c),this._memorySet(g,c),!0}},clear:function(a){return a=a||null,a?this._clearItem(a):this._clearAll()},compress:function(a){return a},decompress:function(a){return a},_getLocalData:function(a){for(var c=null,d=["memory","storage"],e=0,f=d.length;f>e;e++){if(c=this["_"+d[e]+"Get"](a),c&&!this._isExpired(c))return"storage"===d[e]&&this._memorySet(a,c),b.clone(c);c&&this.clear(a)}return null},_addToCollectionData:function(a,c,d){var e=this.get(d);e||(e=d.toJSON());var f={};return f[a.idAttribute]=a.id,e=b.reject(e,f),e.push(c),e},_memoryGet:function(a){return this._memory?this._memory[a]:null},_memorySet:function(a,b){this._memory=this._memory||{},this._memory[a]=b},_storageGet:function(b){var c;try{c=a.localStorage.getItem(this._getKey(b))}catch(d){return null}return void 0===c||"undefined"===c||null===c?null:JSON.parse(c)},_storageSet:function(b,c){var d=this._getKey(b),e=a.localStorage.getItem("monaco-"+this._app.name+":keys")||"{}",f=JSON.parse(e);f[d]=c._ts;try{a.localStorage.setItem("monaco-"+this._app.name+":keys",JSON.stringify(f)),a.localStorage.setItem(d,JSON.stringify(c))}catch(g){try{a.localStorage.setItem("monaco-"+this._app.name+":keys",e)}catch(h){}}},_setExpire:function(a,c,d){var e=null;if(c=b.isNumber(c)||b.isNull(c)?c:void 0,!b.isNull(c)){var f=new Date;f.setMinutes(f.getMinutes()+(c||this.cacheExpire)),e=f.getTime()}return d===!0?(a._ts=e,a):{_ts:e,resp:a}},_isExpired:function(a){var c=a._ts,d=new Date;return!b.isNull(c)&&d.getTime()>c},_clearItem:function(c){var d=this._getKey(c);try{a.localStorage.removeItem(d)}catch(e){throw new Error("unable to remove the localStorage key: "+d)}b.has(this._memory,c)&&delete this._memory[c];var f=JSON.parse(a.localStorage.getItem("monaco-"+this._app.name+":keys"))||{};return delete f[d],this._app.set("monaco-"+this._app.name+":keys",f,!0)},_clearAll:function(){var c=JSON.parse(a.localStorage.getItem("monaco-"+this._app.name+":keys"))||{};b.each(c,function(b,c){try{var d=c.split("#");d=d[1],a.localStorage.removeItem(c)}catch(e){}},this),this._memory={},this._app.set("monaco-"+this._app.name+":keys",{},!0)},_getKey:function(a){return this._app.name+"#"+a}};var f=d.Collection.prototype.initialize;d.Collection.prototype.initialize=function(){return this.on("add remove change reset",function(){var a=arguments.length>0?arguments[arguments.length-1]:{};a.fromLocal||b.result(this,"cacheLocal")!==!0&&this._app.local.autoCache!==!0||this._app.local.set(this,this.toJSON())},this),f.apply(this,arguments)},d.sync=c.sync,c.sync=function(a,c,e){e=e||{};var f=c._app,g=e.localOnly===!0||c.localOnly===!0;if(f&&"read"===a){var h=e.fresh===!0?null:f.local.get(c);if(h)return e.fromLocal=!0,e.success&&e.success(h),!0;var i=b.has(c,"models");if(g===!0)return e.error&&e.error({},"Error: resource not found locally",{}),void 0;if(b.result(e,"cacheLocal")===!0||!b.has(e,"cacheLocal")&&i&&b.result(c,"cacheLocal")===!0||!b.has(e,"cacheLocal")&&!i&&b.result(c.collection,"cacheLocal")===!0||!b.has(e,"cacheLocal")&&!b.has(c,"cacheLocal")&&f.local.autoCache===!0){var j=e.success;e.success=function(a){f.local.set(c,a,b.result(e,"expireLocal")),j&&j.apply(this,arguments)}}}if(g!==!0)return d.sync(a,c,e)}}(window,window._,window.Backbone),function(a,b){"use strict";var c=a.Monaco=a.Monaco||{},d=c.Collection;c.Collection=d.extend({constructor:function(){this.cid=b.uniqueId("c"),d.prototype.constructor.apply(this,arguments)}}),c.Application.prototype.multiFetch=function(a,b){var d=new c.MultiRequest(a);return d.fetch(b)},c.MultiRequest=function(a){this._responses={},this._requests={},this._objects=[],this.cid=b.uniqueId("mr-"),this.beingAborted=!1,this.errorCalled=!1,this.add(a)},c.MultiRequest.prototype={add:function(a){a=b.isArray(a)?a:[a];for(var c=0,d=a.length;d>c;c++)this._objects.push(a[c])},fetch:function(a){var c=a.success,d=a.error;this.beingAborted=!1,this.errorCalled=!1;for(var e=0,f=this._objects.length;f>e;e++){var g=b.clone(a);g.multiRequest=e+1+"/"+this.id,g.success=b.bind(function(a,d,e){return this.beingAborted||(this._success.apply(this,arguments),e.fromLocal||0!==b.size(this._requests)||!c)?void 0:c.call(this,this._responses)},this),g.error=b.bind(function(){return this._error.apply(this,arguments),d&&this.beingAborted&&!this.errorCalled?(this.errorCalled=!0,d.apply(this,arguments)):void 0},this);var h=this._objects[e].fetch(g);h&&!b.isBoolean(h)&&(this._requests[this._objects[e].cid]=h)}return!this.beingAborted&&0===b.size(this._requests)&&b.size(this._responses)>0&&c?c.call(this,this._responses):this},abort:function(a){var c={};if(a&&!this._requests[a])throw new Error("invalid cid: "+a+" - request not found!");a?c[a]=this._requests[a]:c=this._requests,this.beingAborted=!0,b.each(c,function(a,b){4!==a.readyState&&a.abort("stale"),delete this._requests[b]},this)},_success:function(a,b,c){c=c||{},this._responses[a.cid]={object:a,resp:b,options:c},c.fromLocal!==!0&&delete this._requests[a.cid]},_error:function(a){delete this._requests[a.cid],this.abort()}}}(window,window._,window.Backbone),function(a,b){"use strict";var c=a.Monaco=a.Monaco||{},d=/\((.*?)\)/g,e=/(\(\?)?:\w+/g,f=/\*\w+/g,g=/[\-{}\[\]+?.,\\\^$|#\s]/g;b.extend(c.Router.prototype,{_routeConstraints:function(a){var c=b.find(this._routes,function(b){return b.key===a});return c&&c.value&&b.isArray(c.value)&&c.value.length>1&&b.isObject(c.value[1])?c.value[1].regexp:void 0},_routeToRegExp:function(a){var b=this._routeConstraints(a);return a=a.replace(g,"\\$&").replace(d,"(?:$1)?").replace(e,function(a,c){if(b&&b[a.substr(1)]){var d=b[a.substr(1)].toString();return"("+d.slice(1,d.lastIndexOf("/"))+")"}return c?a:"([^/]+)"}).replace(f,"(.*?)"),new RegExp("^"+a+"$")},filter:function(a,b){for(var c=a.length-1,d=0;c>=d;c--){var e=b;b=this._wrapFilter(a[c],e)}return b},_filters:{},_wrapFilter:function(a,c){return b.bind(function(){this._filters[a].call(this,c,arguments)},this)},addFilter:function(a,b){if(this._filters[a])throw new Error("This filter alread exists: "+a);this._filters[a]=b},_getByName:function(a){var c=b.map(this._routes,function(c,d){return b.isArray(c)&&c.length>1&&(b.isString(c[1])&&c[1]===a||b.isObject(c[1])&&c.name===a)?d:null});return route=b.compact(c),route.length>0?route[0]:!1},reverse:function(a,c){var d="";if(c=c||{},!a)throw new Error("required `name` parameter for `reverse` method");return d=this._getByName(a),b.each(c,function(a,b){d=d.replace(":"+b,a)}),d}})}(window,window._,window.Backbone),function(a,b){"use strict";var c=a.Monaco=a.Monaco||{},d=c.View;c.View=d.extend({namespace:"views",views:{},constructor:function(a){a=a||{},d.prototype.constructor.apply(this,arguments),a.template&&(this.template=a.template),this.children={},b.each(this.views,this._subviewConstructor,this);var c=this.render;this.render=b.bind(function(){return c.apply(this,arguments),this._subviewsRender.apply(this,arguments),this.trigger("rendered",this),this},this);var e=this.remove||function(){};this.remove=b.bind(function(){return this._subviewsRemove.apply(this,arguments),e.apply(this,arguments),this.trigger("removed",this),this},this)},render:function(a){return this.template&&(a=b.extend(a,this.collection?this.collection.toJSON():this.model?this.model.toJSON():{}),this.$el.append(this.template(a))),this},_subviewConstructor:function(a,b){var d,e={};a=a||{},d=a.ViewClass||c.View;var f=a.collection||this.collection;if(f&&!a.collectionItem&&(e.collection=f),a.model&&this.model&&(e.model=this.model),a.template&&(e.template=a.template),f&&a.collectionItem)this._subviewPerModelConstructor(b,f,a,e,d);else{var g=new d(e);g.parent=this,this.children[b]=g}},_subviewPerModelConstructor:function(a,d,e,f,g){var h=this.views[a].suffix=e.suffix=e.suffix||b.uniqueId("sfx");this[h]={},this[h].addOne=function(){var b=Array.prototype.slice.call(arguments,0);return b.push({itemView:g,listWrapper:a}),c.ViewForModels.addOne.apply(this,b)},this[h].addAll=function(){var b=Array.prototype.slice.call(arguments,0);return b.push({itemView:g,listWrapper:a}),c.ViewForModels.addAll.apply(this,b)},this.listenTo(d,"add."+h,this[h].addOne),this.listenTo(d,"reset."+h,this[h].addAll),d.each(function(c){viewParams=b.clone(f),viewParams.model=c;var d=new g(viewParams);d.parent=this,this.children[a]=this.children[a]||[],this.children[a].push(d)},this)},_subviewsRender:function(){var a=arguments;b.each(this.children,function(d,e){var f=this.views[e];b.has(f,"autoRender")&&f.autoRender!==!0||((f.collection||this.collection)&&f.collectionItem?this[f.suffix].addAll(f.collection||this.collection,{},{itemView:f.ViewClass||c.ViewClass,listWrapper:e}):(d.setElement(e),d.render.apply(d,a)))},this)},_subviewsRemove:function(){var a=arguments;b.each(this.children,function(c,d){var e=this.views[d];if(b.isArray(c)){for(var f=0,g=c.length;g>f;f++)c[f].remove.apply(c,a);this.stopListening(e.collection||this.collection,"add."+e.suffix),this.stopListening(e.collection||this.collection,"reset."+e.suffix),delete this[e.suffix]}else c.remove.apply(c,a)},this),this.children={}}}),c.ViewForModels=c.View.extend({addOne:function(a,b,c,d){var e=c.ItemView||this.ItemView,f=new e({model:a}),g=f.render(a.toJSON()).el;return d===!0?g:($(c.listWrapper||this.listWrapper).append(g),void 0)},addAll:function(a,b,c){var d=[];b=b||{},b.keepValues||$(c.listWrapper||this.listWrapper).html(""),a.each(function(a){d.push(this.addOne(a,b,c,!0))},this),$(c.listWrapper||this.listWrapper).append(d)}})}(window,window._,window.Backbone),function(a,b,c){"use strict";var d=a.Monaco=a.Monaco||{},e=d.utils=d.utils||{};d.on("app:built",function(a){a.transitions={}}),d.Application.prototype.transitionTo=function(a,b,c){if(!a)throw new Error("missing target view");var e=this.currentView||null,f=c||this.transitions.DefaultTransition||d.Transition,g=new f;this.currentView=g.start(e,a,b)};var f=d.Transition=function(){this.initialize.apply(this,arguments)};b.extend(d.Transition.prototype,c.Events,{namespace:"transitions",initialize:function(){},start:function(a,b,c){return c=c||{},a&&b.el===a.el?(a.remove(),b.render(c)):a?(b.render(c),a.remove()):b.render(c),b}}),f.extend=e.extend}(window,window._,window.Backbone),function(a,b){"use strict";var c=a.Monaco=a.Monaco||{};c.on("app:built",function(a,b){a.experiments=new c.Experiments(b.experiments)});var d=c.Experiments=function(a){a=a||{},this._experiments=[],this.options=b.extend({ga:{slot:1,scope:2},cookie:{prefix:"ab-",days:360,baseDomain:!1}},a)};d.prototype=b.extend(d.prototype,{_removeReference:function(a){var b=this._experiments.indexOf(a);b>=0&&this._experiments.splice(b,1)},get:function(a){return b.find(this._experiments,function(b){return b.key===a})},set:function(a,d,e){var f=a;f instanceof c.Experiment||(f=new c.Experiment(this,a,d,b.extend(this.options,e))),this._experiments.push(f)},remove:function(){b.each(this._experiments,function(a){a.remove()})},split:function(){b.each(this._experiments,function(a){a.split()})}});var e=c.Experiment=function(a,d,e,f){if(!d)throw new Error("Failed to create the experiment - experiment key required");if(e=e||{},f=f||{},f.users=f.users||0,!b.isNumber(f.users)||f.users>1||f.users<0)throw new Error("Error processing experiment: '"+d+"' - users not defined within allowed range");if(this.usersPerGroup=Math.floor(100*f.users/b.size(e)),this.usersPerGroup<1)throw new Error("Error processing experiment: '"+d+"' - individual groups set to less than 1%");this.parent=a,this.key=d,this.groups=e,this.normalized=this._normalizeGroup(e),this.options=f,this.cookie={set:c.utils.setCookie,get:c.utils.getCookie}};e.prototype=b.extend(e.prototype,{original:"__original__",current:null,split:function(){if(!this.current){var a=this.options.cookie,b=this.cookie.get(a.prefix+this.key);b||(b=this.normalized[Math.floor(Math.random()*this.normalized.length)],this.cookie.set(a.prefix+this.key,b,a.days,a.baseDomain),this.saveGroup(b)),this.current=b}return this.current},get:function(a){return this.groups[a]},controller:function(a){return this.current&&this.current!==this.original?a+this.get(this.current).suffix:a},view:function(a){return this.current&&this.current!==this.original?a+this.get(this.current).suffix:a},template:function(a){return this.current&&this.current!==this.original?a+"."+this.get(this.current).suffix:a},remove:function(){var a=this.options.cookie;this.current=null,this.cookie.set(a.prefix+this.key,"",-1,a.baseDomain),this.parent._removeReference(this)},saveGroup:function(a){_gaq.push(["_setCustomVar",this.options.ga.slot,this.key,a,this.options.ga.scope]),_gaq.push(["_trackEvent","experiments","join",this.key+"|"+a])},_normalizeGroup:function(a){var b=[],c=0;for(var d in a)for(var e=0,f=this.usersPerGroup;f>e;e++)b.push(d),c++;for(var g=100-c;--g>=0;)b.push(this.original);return b}})}(window,window._,window.Backbone),function(a){"use strict";var b=a.Monaco.History.prototype.loadUrl;Monaco.History.prototype.loadUrl=function(){var a=b.apply(this,arguments),c=this.fragment;return/^\//.test(c)||(c="/"+c),this.trackPageview(c),a},Monaco.History.prototype.trackPageview=function(b){void 0!==a.ga&&a.ga("send","pageview",b)}}(window,window._,window.Backbone);